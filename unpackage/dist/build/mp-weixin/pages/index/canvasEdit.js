(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/canvasEdit"],{"006c":function(t,i,e){"use strict";var n,s=function(){var t=this,i=t.$createElement;t._self._c},h=[];e.d(i,"b",function(){return s}),e.d(i,"c",function(){return h}),e.d(i,"a",function(){return n})},2440:function(t,i,e){"use strict";var n=e("bfb9"),s=e.n(n);s.a},"708a":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(e("a34a"));function s(t){return t&&t.__esModule?t:{default:t}}function h(t){return o(t)||c(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}function l(t,i,e,n,s,h,a){try{var c=t[h](a),o=c.value}catch(l){return void e(l)}c.done?i(o):Promise.resolve(o).then(n,s)}function u(t){return function(){var i=this,e=arguments;return new Promise(function(n,s){var h=t.apply(i,e);function a(t){l(h,n,s,a,c,"next",t)}function c(t){l(h,n,s,a,c,"throw",t)}a(void 0)})}}var r={props:{value:Object},name:"canvasEdit",data:function(){return{active:!0,ctx:null,copyClip:{x:0,y:0,h:0,w:0},clipX:[],clipY:[],x0:0,y0:0,t0:"",v0:0,lineWidth:"",k:""}},watch:{value:function(t){this.$emit("input",t)}},onReady:function(){this.drawing()},methods:{drawing:function(){this.ctx=t.createCanvasContext("canvas",this),this.ctx.setLineCap("round")},handleCanvasColor:function(t){this.ctx.setStrokeStyle(t)},touchStart:function(t){this.handleCanvasColor(this.value.color),this.ctx.beginPath(),this.lineWidth=this.value.lineWidth,this.k=this.value.lineWidth>3?.3:.2,this.t0=(new Date).getTime(),this.v0=0,this.x0=t.touches[0].clientX,this.y0=t.touches[0].clientY},touchMove:function(){var t=u(n.default.mark(function t(i){var e,s,h,a,c,o;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.clipX.push(this.x0),this.clipY.push(this.y0),e=i.touches[0].clientX-this.x0,s=i.touches[0].clientY-this.y0,h=Math.pow(e*e+s*s,.5),a=(new Date).getTime()-this.t0,c=h/a,0===this.value.keenness)this.ctx.moveTo(this.x0,this.y0),this.ctx.lineTo(this.x0+e,this.y0+s),this.ctx.setLineWidth(this.lineWidth),this.ctx.stroke(),this.ctx.draw(!0);else for(o=0;o<this.value.keenness;o++)this.ctx.moveTo(this.x0+e*o/this.value.keenness,this.y0+s*o/this.value.keenness),this.ctx.lineTo(this.x0+e*(o+1)/this.value.keenness,this.y0+s*(o+1)/this.value.keenness),c-this.v0>=0?(this.lineWidth+=this.k,this.lineWidth>1.5*this.value.lineWidth&&(this.lineWidth=1.5*this.value.lineWidth)):(this.lineWidth-=this.k,this.lineWidth<.25*this.lineWidth&&(this.lineWidth=.25*this.lineWidth)),this.ctx.setLineWidth(this.lineWidth),this.ctx.stroke(),this.ctx.draw(!0);this.x0=i.touches[0].clientX,this.y0=i.touches[0].clientY,this.t0=(new Date).getTime(),this.v0=c;case 8:case"end":return t.stop()}},t,this)}));function i(i){return t.apply(this,arguments)}return i}(),touchEnd:function(t){this.x0=0,this.y0=0,this.t0=null,this.v0=0},handleClear:function(){var t=this;this.active=!1,setTimeout(function(){t.clipX=[],t.clipY=[],t.active=!0},100)},save:function(){var i=this;this.clipX.length?setTimeout(function(){i.getCanvasImage("save")},300):t.showToast({title:"画布空空如也~",icon:"none"})},confirm:function(){var i=this;this.clipX.length?setTimeout(function(){i.getCanvasImage("confirm")},300):t.showToast({title:"画布空空如也~",icon:"none"})},getCanvasImage:function(i){var e=this;this.copyClip.x=Math.min.apply(Math,h(this.clipX))-5,this.copyClip.y=Math.min.apply(Math,h(this.clipY))-5,this.copyClip.w=Math.max.apply(Math,h(this.clipX))-this.copyClip.x+5,this.copyClip.h=Math.max.apply(Math,h(this.clipY))-this.copyClip.y+5,t.canvasToTempFilePath({x:this.copyClip.x,y:this.copyClip.y,width:this.copyClip.w,height:this.copyClip.h,canvasId:"canvas",success:function(n){"save"===i?t.saveImageToPhotosAlbum({filePath:n.tempFilePath}):e.$emit("handleCanvasImage",n.tempFilePath,e.copyClip)}},this)}}};i.default=r}).call(this,e("543d")["default"])},"7eb0":function(t,i,e){"use strict";e.r(i);var n=e("006c"),s=e("b8d2");for(var h in s)"default"!==h&&function(t){e.d(i,t,function(){return s[t]})}(h);e("2440");var a,c=e("f0c5"),o=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);i["default"]=o.exports},b8d2:function(t,i,e){"use strict";e.r(i);var n=e("708a"),s=e.n(n);for(var h in n)"default"!==h&&function(t){e.d(i,t,function(){return n[t]})}(h);i["default"]=s.a},bfb9:function(t,i,e){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/index/canvasEdit-create-component',
    {
        'pages/index/canvasEdit-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("7eb0"))
        })
    },
    [['pages/index/canvasEdit-create-component']]
]);
